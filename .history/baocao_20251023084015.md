Chương II. Phân tích thiết kế

1. Tổng quan kiến trúc hệ thống

1.1 Mô tả tổng quan
Game Store là nền tảng thương mại điện tử chuyên biệt cho game digital, được xây dựng trên kiến trúc 3-tier hiện đại với tích hợp AI/ML. Hệ thống cung cấp trải nghiệm mua sắm cá nhân hóa thông qua thuật toán gợi ý thông minh, đồng thời đảm bảo quản lý toàn diện cho doanh nghiệp.

Mục tiêu hệ thống:
- Cung cấp nền tảng mua bán game digital an toàn, tiện lợi
- Cá nhân hóa trải nghiệm người dùng qua AI recommendation
- Tối ưu hóa quy trình thanh toán và quản lý giao dịch
- Hỗ trợ quản trị viên giám sát và phân tích kinh doanh hiệu quả
- Đảm bảo khả năng mở rộng và bảo trì dễ dàng

1.2 Kiến trúc tổng thể

Hệ thống áp dụng kiến trúc Client-Server với 3 tầng (3-tier architecture):

TIER 1 - PRESENTATION LAYER (Frontend):
- Công nghệ: React 18 + TypeScript + Material-UI
- Trách nhiệm:
  o Giao diện người dùng responsive (desktop/mobile/tablet)
  o Xử lý user interaction và validation phía client
  o Render dữ liệu từ backend
  o Quản lý state với React Context API
  o Routing với React Router DOM v6
- Components chính:
  o Customer Interface: Home, GameDetail, Cart, Profile, Library
  o Admin Dashboard: GameManagement, UserManagement, Analytics
  o Shared Components: Navbar, Footer, GameCard, Modal

TIER 2 - APPLICATION LAYER (Backend):
- Công nghệ: Node.js + Express + TypeScript
- Trách nhiệm:
  o RESTful API endpoints
  o Business logic processing
  o Authentication & Authorization (JWT)
  o Data validation
  o Integration với AI service
- Cấu trúc:
  o Controllers: Xử lý HTTP requests/responses
  o Services: Business logic
  o Middleware: Auth, Error handling, Logging
  o Routes: API routing

TIER 3 - DATA LAYER:
- Database chính: MySQL 8.0
  o Lưu trữ persistent data: users, games, transactions
  o ACID compliance đảm bảo tính toàn vẹn dữ liệu
  o Relationship management với foreign keys
- AI Service: Python Flask
  o Microservice riêng biệt cho AI/ML
  o Recommendation algorithms
  o Pre-computed models trong memory
- Tracking Database: SQLite
  o User interactions tracking
  o Temporal analysis (7-day recent activity)
  o Lightweight và fast

1.3 Luồng xử lý tổng quát

Luồng xử lý request cơ bản:
1. User tương tác → Frontend (React)
2. Frontend gửi HTTP request → Backend API (Express)
3. Backend xác thực JWT token → Middleware
4. Controller nhận request → Gọi Service
5. Service xử lý business logic → Truy vấn Database
6. Database trả kết quả → Service xử lý
7. Service trả data → Controller format response
8. Backend trả JSON → Frontend render UI

Luồng xử lý AI recommendation (đặc biệt):
1. Frontend request recommendations → Backend
2. Backend chuẩn bị data (games, users, interactions)
3. Backend gọi AI Service (Python Flask) qua HTTP
4. AI Service:
   - Load pre-computed models (SVD, similarity matrix)
   - Tính toán scores (SVD, Content, Demo, Keyword)
   - Apply dynamic weights
   - Adaptive boosting
5. AI Service trả recommendations → Backend
6. Backend transform data → Frontend
7. Frontend render game list

2. Phân tích Actor và Use Cases

2.1 Actors trong hệ thống

ACTOR 1: Guest (Khách vãng lai)
- Định nghĩa: Người dùng chưa đăng ký/đăng nhập
- Quyền hạn:
  o Xem danh sách game
  o Xem chi tiết game
  o Tìm kiếm game
  o Xem reviews
- Hạn chế: Không thể mua game, đánh giá, hoặc xem recommendations

ACTOR 2: Customer (Khách hàng)
- Định nghĩa: Người dùng đã đăng ký và đăng nhập
- Kế thừa: Tất cả quyền của Guest
- Quyền hạn bổ sung:
  o Quản lý tài khoản cá nhân
  o Mua game và thanh toán
  o Quản lý library (thư viện game đã mua)
  o Wishlist (danh sách yêu thích)
  o Đánh giá và review game
  o Nhận gợi ý cá nhân hóa
  o Xem lịch sử giao dịch
  o Nạp tiền vào tài khoản

ACTOR 3: Admin (Quản trị viên)
- Định nghĩa: Người quản lý hệ thống
- Quyền hạn đầy đủ:
  o Tất cả quyền của Customer
  o Quản lý game (CRUD operations)
  o Quản lý user (xem, khóa tài khoản)
  o Duyệt yêu cầu nạp tiền
  o Xem thống kê và báo cáo
  o Quản lý đánh giá
  o Cấu hình hệ thống

ACTOR 4: AI Service (Hệ thống con)
- Định nghĩa: Microservice xử lý AI/ML
- Chức năng:
  o Nhận request từ Backend
  o Tính toán recommendations
  o Trả kết quả về Backend
- Không tương tác trực tiếp với user
2. Các thành phần chính của hệ thống
2.1 Khách hàng (Customer)
Khách hàng là người dùng cuối của hệ thống, thực hiện các hoạt động như:
-	Tìm kiếm và xem thông tin chi tiết game:
o	Duyệt danh sách game theo thể loại, nền tảng, nhà phát hành
o	Xem thông tin chi tiết: mô tả, giá, hình ảnh
o	Đọc đánh giá và xếp hạng từ người dùng khác
o	Xem thông tin yêu cầu hệ thống (CPU, GPU, RAM, storage)
-	Đăng ký và quản lý tài khoản:
o	Đăng ký tài khoản mới với email và mật khẩu
o	Đăng nhập/đăng xuất hệ thống
o	Cập nhật thông tin cá nhân (tên, tuổi, giới tính)
o	Quản lý số dư tài khoản
-	Quản lý thư viện game cá nhân:
o	Thêm game vào wishlist để theo dõi
o	Xem lịch sử game đã xem
o	Quản lý danh sách game đã mua
o	Tải và cài đặt game đã mua
-	Giao dịch và thanh toán:
o	Nạp tiền vào tài khoản qua chuyển khoản ngân hàng
o	Mua game bằng số dư tài khoản
o	Xem lịch sử giao dịch và biến động số dư
o	Theo dõi trạng thái yêu cầu nạp tiền
-	Tương tác và đóng góp:
o	Đánh giá game đã mua (rating 1-5 sao)
o	Viết review chi tiết về trải nghiệm chơi game
o	Nhận gợi ý game phù hợp dựa trên sở thích cá nhân
2.2 Quản trị viên (Admin)
Quản trị viên là người quản lý và giám sát toàn bộ hệ thống, có quyền truy cập và thực hiện tất cả các chức năng quản lý như:
-	Quản lý game:
o	Thêm game mới vào hệ thống với đầy đủ thông tin
o	Chỉnh sửa thông tin game (giá, mô tả, hình ảnh)
o	Xóa game không còn kinh doanh
o	Quản lý thể loại game, nền tảng, nhà phát hành
o	Xem thống kê game bán chạy, đánh giá cao
-	Quản lý người dùng:
o	Xem danh sách tất cả người dùng
o	Theo dõi thông tin chi tiết từng người dùng
o	Quản lý số dư tài khoản người dùng
o	Xem thống kê: tổng số user, customer, admin
o	Phân quyền và quản lý vai trò
-	Quản lý giao dịch:
o	Xem tất cả giao dịch mua game
o	Theo dõi doanh thu theo thời gian
o	Xem thống kê tổng doanh thu, số lượng giao dịch
o	Xuất báo cáo tài chính
-	Quản lý nạp tiền:
o	Xem danh sách yêu cầu nạp tiền đang chờ duyệt
o	Duyệt hoặc từ chối yêu cầu nạp tiền
o	Xác minh thông tin chuyển khoản
o	Cập nhật số dư cho người dùng sau khi duyệt
-	Quản lý đánh giá:
o	Xem tất cả đánh giá và review từ người dùng
o	Kiểm duyệt và xóa review không phù hợp
o	Theo dõi rating trung bình của từng game
-	Thống kê và báo cáo:
o	Dashboard tổng quan với các chỉ số quan trọng
o	Biểu đồ doanh thu, số lượng user, giao dịch
o	Phân tích xu hướng mua game
o	Đánh giá hiệu quả kinh doanh
2.3 Tài khoản
Tài khoản là phần lưu trữ thông tin của người dùng trên hệ thống, bao gồm:
-	Thông tin cơ bản:
o	User ID (định danh duy nhất)
o	Username (tên đăng nhập)
o	Email (để xác thực và liên hệ)
o	Mật khẩu (được mã hóa bằng bcrypt)
o	Vai trò (Customer/Admin)
-	Thông tin mở rộng:
o	Tuổi (để phân tích và gợi ý phù hợp)
o	Giới tính (để cá nhân hóa trải nghiệm)
o	Số dư tài khoản (để mua game)
-	Quyền truy cập:
o	Customer: Truy cập các trang mua sắm, quản lý thông tin cá nhân
o	Admin: Truy cập đầy đủ tất cả trang quản trị
o	Phân quyền dựa trên JWT token
2.4 Sản phẩm Game
Sản phẩm game là các mặt hàng digital được admin đăng lên hệ thống để khách hàng có thể tìm kiếm, chọn lựa và mua. Mỗi game có các thuộc tính:
-	Thông tin cơ bản:
o	Game ID (mã định danh duy nhất)
o	Tên game
o	Mô tả chi tiết về gameplay, cốt truyện
o	Giá bán (VNĐ)
o	Hình ảnh đại diện
-	Phân loại:
o	Thể loại (Genre): Action, RPG, Strategy, Sports, Simulation, etc.
o	Nền tảng (Platform): Windows, macOS, Linux, PlayStation, Xbox
o	Chế độ chơi (Mode): Single-player, Multiplayer, Co-op
o	Nhà phát hành (Publisher)
o	Ngày phát hành
-	Yêu cầu hệ thống:
o	CPU tối thiểu và đề xuất
o	GPU tối thiểu và đề xuất
o	RAM yêu cầu
o	Dung lượng ổ cứng
o	Hệ điều hành hỗ trợ
-	Thống kê và đánh giá:
o	Rating trung bình (1-5 sao)
o	Số lượng đánh giá
o	Số lượt xem
o	Số lượng đã bán
-	Tính năng nâng cao:
o	Người dùng có thể sắp xếp game theo: giá, rating, ngày phát hành
o	Lọc game theo thể loại, nền tảng, khoảng giá
o	Tìm kiếm game theo tên
o	Xem game tương tự dựa trên thuật toán gợi ý
2.5 Hệ thống gợi ý thông minh
Hệ thống AI/ML được tích hợp để cung cấp trải nghiệm cá nhân hóa:
-	Collaborative Filtering:
o	Phân tích hành vi người dùng tương tự
o	Gợi ý game dựa trên người dùng có sở thích giống nhau
o	Tính toán độ tương đồng giữa users
-	Content-Based Filtering:
o	Phân tích đặc điểm của game (genre, platform, publisher)
o	Gợi ý game tương tự với game người dùng đã thích
o	Xét tương đồng về nội dung và thuộc tính
-	Temporal Impact:
o	Tính trọng số thời gian cho các tương tác
o	Ưu tiên hành vi gần đây hơn
o	Điều chỉnh gợi ý theo xu hướng hiện tại
-	Dynamic Weighting:
o	Tự động điều chỉnh trọng số các yếu tố
o	Cân bằng giữa collaborative và content-based
o	Tối ưu hóa độ chính xác gợi ý
3. Các yêu cầu phi chức năng
3.1 Hiệu năng
-	Thời gian tải trang không quá 3 giây
-	Xử lý giao dịch mua game trong vòng 1 giây
-	Hỗ trợ tối thiểu 1000 người dùng đồng thời
3.2 Bảo mật
-	Xác thực người dùng bằng JWT token
-	HTTPS cho tất cả giao dịch
-	Bảo vệ chống SQL injection và XSS attacks
-	Session timeout sau 24 giờ không hoạt động
3.3 Khả năng sử dụng
-	Giao diện thân thiện, trực quan với Material-UI
-	Responsive design hoạt động tốt trên mọi thiết bị
-	Thông báo rõ ràng cho mọi thao tác
-	Hướng dẫn sử dụng dễ hiểu
-	Hỗ trợ người dùng mới làm quen nhanh
3.4 Độ tin cậy
-	Hệ thống hoạt động ổn định 99.9% thời gian
-	Backup dữ liệu định kỳ
-	Xử lý lỗi gracefully với thông báo thân thiện
-	Rollback transaction khi gặp lỗi
3.5 Khả năng mở rộng
-	Kiến trúc modular dễ dàng thêm tính năng mới
-	Database được thiết kế normalized có thể scale
-	API RESTful chuẩn hóa
-	Dễ dàng tích hợp với hệ thống thanh toán khác
-	Có thể mở rộng lên microservices trong tương lai
3.6 Khả năng bảo trì
-	Code được tổ chức rõ ràng theo kiến trúc MVC
-	Code được tổ chức rõ ràng theo kiến trúc MVC
-	Comment và documentation đầy đủ
-	TypeScript giúp detect lỗi sớm
-	Test coverage đầy đủ các chức năng quan trọng
-	Git version control để quản lý source code
